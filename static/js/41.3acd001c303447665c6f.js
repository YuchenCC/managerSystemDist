webpackJsonp([41],{1077:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(218),r=s(o),l=a(217),i=s(l),n=a(142),m=s(n);t.default={data:function(){return{summaryForm:{plan_summary:"",attaches:[]},summaryFormRule:{plan_summary:[{required:!0,message:"请填写计划相关的工作总结"},{min:10,message:"最少10个字"}]},fileList:[]}},props:{value:{type:Boolean,default:!1},planId:{type:String,default:""}},watch:{fileList:function(e,t){var a=this;this.summaryForm.attaches=[],e.forEach(function(e,t){a.summaryForm.attaches.push({attach_name:e.name,attach_path:e.url,attach_size:e.size})})}},methods:{dialogClose:function(){this.dialogVisible=!1,this.$emit("input",!1)},confirm:function(){function e(){return t.apply(this,arguments)}var t=(0,i.default)(r.default.mark(function e(){var t,a=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this,this.$refs.summaryForm.validate(function(e){if(!e)return!1;m.default.plan.putPlanSummary(t.planId,t.summaryForm).then(function(){a.dialogClose(),a.$emit("reload-list")})});case 2:case"end":return e.stop()}},e,this)}));return e}(),onSuccess:function(e,t,a){this.fileList=a},handleRemove:function(e,t){this.fileList=t},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 10 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")}}}},1092:function(e,t,a){t=e.exports=a(867)(),t.push([e.i,".dialog-summary .el-dialog__header{border-bottom:1px solid #dedede}.dialog-summary .el-dialog__body{padding:20px 20px 10px}","",{version:3,sources:["D:/桌面/personal/project/web-project/src/views/plan/modalSummary.vue"],names:[],mappings:"AACA,mCACE,+BAAiC,CAClC,AACD,iCACE,sBAA6B,CAC9B",file:"modalSummary.vue",sourcesContent:["\n.dialog-summary .el-dialog__header {\n  border-bottom: 1px solid #dedede;\n}\n.dialog-summary .el-dialog__body {\n  padding: 20px 20px 10px 20px;\n}\n"],sourceRoot:""}])},1108:function(e,t,a){var s=a(1092);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(868)("21261122",s,!0)},1126:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"dialog-summary",attrs:{title:"计划总结",visible:e.value,width:"500px","append-to-body":"","before-close":e.dialogClose},on:{"update:visible":function(t){e.value=t}}},[a("el-form",{ref:"summaryForm",attrs:{model:e.summaryForm,rules:e.summaryFormRule}},[a("div",{staticClass:"box-flex fs12 mb10"},[a("div",{staticClass:"fc6"},[a("span",{staticClass:"fc-red vm mr10"},[e._v("*")]),e._v("计划总结：")]),e._v(" "),a("div",{staticClass:"flex-one tr fc9"},[e._v("总结发布后，不允许修改")])]),e._v(" "),a("el-form-item",{staticClass:"mb10",attrs:{prop:"plan_summary"}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请填写计划相关的工作总结"},model:{value:e.summaryForm.plan_summary,callback:function(t){e.$set(e.summaryForm,"plan_summary",t)},expression:"summaryForm.plan_summary"}})],1),e._v(" "),a("el-form-item",{staticClass:"mb0",attrs:{label:"上传附件："}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","file-list":e.fileList,limit:10,"on-success":e.onSuccess,"on-remove":e.handleRemove,"on-preview":e.handlePreview,multiple:""}},[a("el-button",{attrs:{size:"small",type:"text"}},[e._v("点击上传")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer tc",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.dialogClose}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}},881:function(e,t,a){a(1108);var s=a(215)(a(1077),a(1126),null,null);e.exports=s.exports}});
//# sourceMappingURL=41.3acd001c303447665c6f.js.map