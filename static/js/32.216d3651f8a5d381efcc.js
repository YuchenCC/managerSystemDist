webpackJsonp([32],{1173:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a(928),s=function(e){return e&&e.__esModule?e:{default:e}}(l),n=a(1189),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(n),i=a(929);t.default={data:function(){return{query:r.initQuery(),industryTypes:[{value:1,label:"行业1"},{value:2,label:"行业2"}],serviceStates:i.serviceStates,dateRange:null,serviceStateText:{1:"通过",2:"待审核",3:"审核拒绝"}}},mixins:[s.default],methods:{_loadList:function(){var e=this,t=this.assignQuery(this.query);this.$api.service.getServiceList(t).then(function(t){e.tableParams.list=t.rows,e.tableParams.totalCount=t.total})},onReset:function(){this.dateRange=null,this.query=r.initQuery(),this.onSearch()},changeDageRange:function(e){this.query.start_time=e?e[0]||"":"",this.query.end_time=e?e[1]||"":""},applyOpenService:function(){this.$router.push({name:"serviceNew"})},exportList:function(){console.log("导出数据")},toDetail:function(e){this.$router.push({name:"serviceDetail",params:{serviceId:e.id}})},toEdit:function(e){this.$router.push({name:"serviceEdit",query:{id:e.id}})},doDelete:function(e){var t=this;this.$api.service.deleteService(e.id).then(function(e){t.tableParams.pageNum>1&&1==t.tableParams.list.length&&--t.tableParams.pageNun,t.$message("服务删除成功"),t._loadList()})}}}},1189:function(e,t,a){"use strict";function l(){return{name:"",industry_type_id:"",state:"",start_time:"",end_time:""}}Object.defineProperty(t,"__esModule",{value:!0}),t.initQuery=l},1267:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"service-list"},[a("div",{staticClass:"mb10"},[a("div",{staticClass:"dib w200"},[a("el-input",{attrs:{placeholder:"企业名称/代码/联系人"},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}})],1),e._v(" "),a("el-select",{staticClass:"w200",attrs:{placeholder:"请选择行业"},model:{value:e.query.industry_type_id,callback:function(t){e.$set(e.query,"industry_type_id",t)},expression:"query.industry_type_id"}},[a("el-option",{attrs:{value:"",label:"全部行业"}}),e._v(" "),e._l(e.industryTypes,function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})})],2),e._v(" "),a("el-select",{staticClass:"w200",attrs:{placeholder:"请选择状态"},model:{value:e.query.state,callback:function(t){e.$set(e.query,"state",t)},expression:"query.state"}},[a("el-option",{attrs:{value:"",label:"全部状态"}}),e._v(" "),e._l(e.serviceStates,function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})})],2),e._v(" "),a("label"),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changeDageRange},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.onReset}},[e._v("清空")])],1),e._v(" "),a("div",{staticClass:"mb10"},[a("el-button",{attrs:{type:"primary"},on:{click:e.applyOpenService}},[e._v("申请开通")]),e._v(" "),a("el-button",{on:{click:e.exportList}},[e._v("导出")])],1),e._v(" "),a("el-table",{attrs:{data:e.tableParams.list,"header-align":"center",border:"","header-row-class-name":"header-center"}},[a("el-table-column",{attrs:{label:"企业名称",prop:"customer_name"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text-link",on:{click:function(a){e.toDetail(t.row)}}},[e._v(e._s(t.row.customer_name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"社会信用代码",prop:"social_credit_code"}}),e._v(" "),a("el-table-column",{attrs:{label:"联系人",prop:"contact_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"所属行业",prop:"industry_type_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"所在地",prop:"city_id"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("福州")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"申请时间",prop:"create_time"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dateFormat")(t.row.create_time)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"service_state"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.serviceStateText[t.row.service_state]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.toDetail(t.row)}}},[e._v("查看")]),e._v(" "),1!=t.row.service_state?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.toEdit(t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),1!=t.row.service_state?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.doDelete(t.row)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),e.tableParams.totalCount?a("el-pagination",{staticClass:"mt15",attrs:{"current-page":e.tableParams.currentPage,"page-sizes":e.tableParams.pageSizeList,"page-size":e.tableParams.pageSize,layout:e.tableParams.layout,total:e.tableParams.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1)},staticRenderFns:[]}},916:function(e,t,a){var l=a(215)(a(1173),a(1267),null,null);e.exports=l.exports},928:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(216),n=l(s),r=a(369),i=l(r);t.default={data:function(){return{tableServer:{},tableDataList:[],tableSelectionItems:[],tableTotalCount:0,tableOption:{layout:"total, sizes, prev, pager, next, jumper",pageSizeList:[10,20,30,40]},tableParams:{page_size:10,page_num:1}}},mounted:function(){var e=this;this.initTableServer&&this.initTableServer().then(function(){e.requestData()})},computed:{selectedIds:function(){var e=this;return this.tableParams.selectedItems.map(function(t){return t[e.pk]})}},methods:{requestData:function(){var e=this;this.tableServer.loadTableData&&this.tableServer.extraParams.id&&this.tableServer.loadTableData(this.paramsHandler()).then(function(){e.initialTableData(e.tableServer.dataList())})},paramsHandler:function(){return(0,i.default)({},this.tableParams,this.tableServer.extraParams,this.tableServer.searchParams)},initialTableData:function(e){this.tableDataList=e.data_list,this.tableTotalCount=e.total_num,this.tableParams.page_size===e.page_size&&this.tableParams.page_num===e.page_num||(this.$message("当前页数不匹配"),console.log(e),this.tableParams.page_size=e.page_size,this.tableParams.page_num=e.page_num)},handleSizeChange:function(e){e&&e!==this.tableParams.page_size&&(this.tableParams.page_size=e,this.requestData())},handleCurrentChange:function(e){e&&this.tableParams.page_num!==e&&(this.tableParams.page_num=e,this.requestData())},onSelectionChange:function(e){this.tableSelectionItems=[].concat((0,n.default)(e))},assignQuery:function(e){return(0,i.default)({page_num:this.tableParams.pageNum,page_size:this.tableParams.pageSize},e)},onSearch:function(){this.tableParams.pageNum=1,this._loadList()}}}},929:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.planType=[{value:1,label:"日计划"},{value:2,label:"周计划"},{value:3,label:"月计划"}],t.planState=[{value:1,label:"草稿"},{value:2,label:"已发布"},{value:3,label:"删除"}],t.supportType=[{value:1,label:"资金"},{value:2,label:"技术支持"},{value:3,label:"协访"},{value:4,label:"其他"}],t.customerLevel=[{value:"",label:"全部客户级别"},{value:1,label:"VIP"},{value:2,label:"重要客户"},{value:3,label:"普通客户"}],t.capitalTypes=[{value:1,label:"自筹"},{value:2,label:"政府拨款"},{value:3,label:"其他"}],t.tenderTypes=[{value:1,label:"公开招标"},{value:2,label:"邀标"},{value:3,label:"竞争性谈判"},{value:4,label:"单一来源采购"},{value:5,label:"其他"}],t.roleTypes=[{value:1,label:"项目经办人"},{value:2,label:"经办负责人"},{value:3,label:"分管领导"},{value:4,label:"关键人"}],t.projectProgressTypes=[{value:"1",label:"初步洽谈"},{value:"2",label:"方案提交"},{value:"3",label:"立项"},{value:"4",label:"招标"},{value:"5",label:"运行调试"},{value:"6",label:"汇款"}],t.serviceStates=[{value:1,label:"运行中"},{value:2,label:"待审核"},{value:3,label:"审核拒绝"}]}});
//# sourceMappingURL=32.216d3651f8a5d381efcc.js.map