webpackJsonp([19],{1087:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{provinceList:[],cityList:[]}},methods:{handlerProvinceChange:function(e){this.getCityList(e)},getProvinceList:function(){var e=this;this.$api.common.getProvinceList().then(function(t){e.provinceList=t})},getCityList:function(e){var t=this;this.$api.common.getCityList({org_code:e}).then(function(e){t.cityList=e,console.log(t.provinceList,t.cityList)})}},created:function(){this.getProvinceList()}}},1174:function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(141),o=s(r),n=i(1087),a=s(n),l=i(939),c=s(l),u=i(1190),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(u),p=i(8);t.default={data:function(){return{service:d.initService(),rules:d.initRule.call(this),dateRange:"",uploadConfig:{accept:"image/png, image/jpg",noteMessage:"请提供证件的原件照片或彩色扫描件，文字/盖章清晰可辨认，jpg、jpeg、pngges ，不超过10MB"},fileList:[]}},components:{uploadImage:c.default},mixins:[a.default],computed:{id:function(e,t){return this.$route.query.id}},methods:{loadServiceDetail:function(){},doApply:function(){var e=this;this.$refs.form.validate(function(t){if(t){var i=(0,o.default)({},e.service);i.start_time=p.fmt.getTime(i.start_time),i.end_time=p.fmt.getTime(i.end_time),i.business_licence_img=e.fileList[0]?e.fileList[0].url:"",e.id||e.$api.service.addService(i).then(function(t){e.$message("添加成功"),e.$refs.form.resetFields()})}})},doCancel:function(){console.log("cancel apply"),this.$refs.form.resetFields()},changeDageRange:function(e){this.service.start_time=e?e[0]||"":"",this.service.end_time=e?e[1]||"":""},uploadSuccessHandler:function(e,t,i,s){this.fileList=[t],console.log(this.fileList)}},created:function(){this.id&&this.loadServiceDetail(),this.service.province_id&&this.getCityList(this.service.province_id)}}},1190:function(e,t,i){"use strict";function s(){return{customer_id:"",customer_name:"customer_name",social_credit_code:"123456789123456789",contact_name:"contact_name",industry_type_id:"industry_type_id",industry_subtype_id:"industry_subtype_id",province_id:"110000",city_id:"110100",admin_id:"",admin_phone:"15880152020",admin_password:"123456",power_customer_no:"",water_customer_no:"",gas_customer_no:"",comm_customer_no:"",business_licence_img:"",start_time:"",end_time:"",enabled_services:["1"],enabled_industries:["1"]}}function r(e,t,i){var s=t.length;s<6||s>8?i(new Error("输入6-8位密码")):i()}function o(e,t,i){t?20!=t.toString().length&&i(new Error("输入18位编号")):i()}function n(){return{customer_name:[{required:!0,message:"必填字段"},{min:2,max:50,message:"长度在 2 到 50 个字符"}],social_credit_code:[{required:!0,message:"必填字段"},{min:18,max:18,message:"长度为18位",trigger:"blur"}],contact_name:[{required:!0,message:"必填字段"},{min:2,max:20,message:"长度在 2 到 20 个字符"}],industry_type_id:[{required:!0,message:"必填字段"}],industry_subtype_id:[{required:!0,message:"必填字段"}],province_id:[],city_id:[],admin_phone:[{required:!0,message:"必填字段"}],admin_password:[{required:!0,message:"必填字段"},{validator:r,trigger:"blur"}],power_customer_no:[{validator:o,trigger:"blur"}],water_customer_no:[{validator:o,trigger:"blur"}],gas_customer_no:[{validator:o,trigger:"blur"}],comm_customer_no:[{validator:o,trigger:"blur"}]}}Object.defineProperty(t,"__esModule",{value:!0}),t.initService=s,t.initRule=n},1207:function(e,t,i){t=e.exports=i(867)(),t.push([e.i,".service-edit .el-select{width:100%}.service-edit .w800{width:800px}","",{version:3,sources:["D:/桌面/personal/project/web-project/src/views/service/new/index.vue"],names:[],mappings:"AACA,yBACE,UAAY,CACb,AACD,oBACE,WAAa,CACd",file:"index.vue",sourcesContent:["\n.service-edit .el-select {\n  width: 100%;\n}\n.service-edit .w800 {\n  width: 800px;\n}\n"],sourceRoot:""}])},1229:function(e,t,i){var s=i(1207);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);i(868)("5cb599a9",s,!0)},1268:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"service-edit"},[i("el-form",{ref:"form",staticClass:"w800",attrs:{model:e.service,rules:e.rules,"label-width":"110px"}},[i("div",{staticClass:"w550"},[i("h3",[e._v("基本设置")]),e._v(" "),i("el-form-item",{attrs:{label:"企业名称:",prop:"customer_name"}},[i("el-input",{attrs:{placeholder:"请输入企业名称"},model:{value:e.service.customer_name,callback:function(t){e.$set(e.service,"customer_name",t)},expression:"service.customer_name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"社会信用代码:",prop:"social_credit_code"}},[i("el-input",{attrs:{placeholder:"18位字符"},model:{value:e.service.social_credit_code,callback:function(t){e.$set(e.service,"social_credit_code",t)},expression:"service.social_credit_code"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"联系人:",prop:"contact_name"}},[i("el-input",{attrs:{placeholder:"请输入企业联系人的真实姓名"},model:{value:e.service.contact_name,callback:function(t){e.$set(e.service,"contact_name",t)},expression:"service.contact_name"}})],1),e._v(" "),i("el-form-item",{staticClass:"is-required",attrs:{label:"行业类型:"}},[i("el-row",[i("el-col",{staticClass:"pr10",attrs:{span:12}},[i("el-form-item",{attrs:{"label-width":"0",prop:"industry_type_id"}},[i("el-select",{attrs:{placeholder:"请选择行业大类"},model:{value:e.service.industry_type_id,callback:function(t){e.$set(e.service,"industry_type_id",t)},expression:"service.industry_type_id"}},[i("el-option",{attrs:{label:"行业1",value:"行业1"}}),e._v(" "),i("el-option",{attrs:{label:"行业2",value:"行业2"}})],1)],1)],1),e._v(" "),i("el-col",{staticClass:"pl10",attrs:{span:12}},[i("el-form-item",{attrs:{"label-width":"0",prop:"industry_subtype_id"}},[i("el-select",{attrs:{placeholder:"请选择行业子类"},model:{value:e.service.industry_subtype_id,callback:function(t){e.$set(e.service,"industry_subtype_id",t)},expression:"service.industry_subtype_id"}},[i("el-option",{attrs:{label:"行业子类1",value:"行业子类1"}}),e._v(" "),i("el-option",{attrs:{label:"行业子类2",value:"行业子类2"}})],1)],1)],1)],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"所在地:"}},[i("el-row",[i("el-col",{staticClass:"pr10",attrs:{span:12}},[i("el-select",{attrs:{placeholder:"请选择省份"},on:{change:e.handlerProvinceChange},model:{value:e.service.province_id,callback:function(t){e.$set(e.service,"province_id",t)},expression:"service.province_id"}},e._l(e.provinceList,function(e,t){return i("el-option",{key:t,attrs:{label:e.org_name,value:e.org_code}})}))],1),e._v(" "),i("el-col",{staticClass:"pl10",attrs:{span:12}},[i("el-select",{attrs:{placeholder:"请选择城市"},model:{value:e.service.city_id,callback:function(t){e.$set(e.service,"city_id",t)},expression:"service.city_id"}},e._l(e.cityList,function(e,t){return i("el-option",{key:t,attrs:{label:e.org_name,value:e.org_code}})}))],1)],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"管理员帐号:",prop:"admin_phone"}},[i("el-input",{attrs:{placeholder:"请输入手机号作为帐号"},model:{value:e.service.admin_phone,callback:function(t){e.$set(e.service,"admin_phone",t)},expression:"service.admin_phone"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"设置密码:",prop:"admin_password"}},[i("el-input",{attrs:{type:"password",placeholder:"设置密码"},model:{value:e.service.admin_password,callback:function(t){e.$set(e.service,"admin_password",t)},expression:"service.admin_password"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"电力用户编码:",prop:"power_customer_no"}},[i("el-input",{attrs:{placeholder:"填写电力用户编码，为客户更好提供服务"},model:{value:e.service.power_customer_no,callback:function(t){e.$set(e.service,"power_customer_no",t)},expression:"service.power_customer_no"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"水力用户编码:",prop:"water_customer_no"}},[i("el-input",{attrs:{placeholder:"填写水力用户编码，为客户更好提供服务"},model:{value:e.service.water_customer_no,callback:function(t){e.$set(e.service,"water_customer_no",t)},expression:"service.water_customer_no"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"燃气用户编码:",prop:"gas_customer_no"}},[i("el-input",{attrs:{placeholder:"填写燃气用户编码，为客户更好提供服务"},model:{value:e.service.gas_customer_no,callback:function(t){e.$set(e.service,"gas_customer_no",t)},expression:"service.gas_customer_no"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"通信服务编码:",prop:"comm_customer_no"}},[i("el-input",{attrs:{placeholder:"填写通信服务编码，为客户更好提供服务"},model:{value:e.service.comm_customer_no,callback:function(t){e.$set(e.service,"comm_customer_no",t)},expression:"service.comm_customer_no"}})],1)],1),e._v(" "),i("el-form-item",{staticClass:"bb",attrs:{label:"营业执照:"}},[i("upload-image",{attrs:{config:e.uploadConfig,"file-list":e.fileList},on:{"on-success":e.uploadSuccessHandler}})],1),e._v(" "),i("div",{staticClass:"w550"},[i("h3",[e._v("服务设置")]),e._v(" "),i("el-form-item",{attrs:{label:"有效时间:"}},[i("el-date-picker",{attrs:{type:"daterange",id:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changeDageRange},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"开启服务:"}},[i("el-checkbox-group",{model:{value:e.service.enabled_services,callback:function(t){e.$set(e.service,"enabled_services",t)},expression:"service.enabled_services"}},[i("el-checkbox",{attrs:{label:"资产管理"}},[e._v("资产管理")]),e._v(" "),i("el-checkbox",{attrs:{label:"运维管理"}},[e._v("运维管理")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"开启行业:"}},[i("el-checkbox-group",{model:{value:e.service.enabled_industries,callback:function(t){e.$set(e.service,"enabled_industries",t)},expression:"service.enabled_industries"}},[i("el-checkbox",{attrs:{label:"电力行业"}},[e._v("电力行业")])],1)],1)],1),e._v(" "),i("div",{staticClass:"w550 tc"},[i("el-button",{attrs:{type:"primary"},on:{click:e.doApply}},[e._v("申请")]),e._v(" "),i("el-button",{on:{click:e.doCancel}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]}},917:function(e,t,i){i(1229);var s=i(215)(i(1174),i(1268),null,null);e.exports=s.exports},935:function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(141),o=s(r),n=i(220),a=s(n),l=(a.default.imgHost,{action:a.default.uploadAction,accept:"*",showFileList:!0,multiple:!1,listType:"text",autoUpload:!0,noteMessage:"只能上传jpg/png文件，且不超过500kb"});t.default={name:"uploadImage",props:{config:{default:function(){return{}}},fileList:{type:[Array],default:function(){return[]}}},data:function(){return{}},watch:{fileList:{handler:function(e,t){this.$refs.refUpload&&this.$refs.refUpload.clearFiles()},deep:!0}},computed:{option:function(){return(0,o.default)({},l,this.config)}},methods:{handleRemove:function(e,t){this.$emit("on-remove",e,t,this)},handlePreview:function(e){this.$emit("on-preview",e,this)},handleExceed:function(e,t){this.$message.warning("当前限制选择"+this.option.limit+"个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},handleSuccess:function(e,t,i){this.$emit("on-success",e,t,i,this)}}}},939:function(e,t,i){var s=i(215)(i(935),i(940),null,null);e.exports=s.exports},940:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-upload",{ref:"refUpload",attrs:{action:e.option.action,accept:e.option.accept,"show-file-list":e.option.showFileList,"list-type":e.option.listType,"auto-upload":e.option.autoUpload,limit:e.option.limit,"file-list":e.fileList,multiple:e.option.multiple,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"on-success":e.handleSuccess,"on-exceed":e.handleExceed}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.option.noteMessage))])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=19.302b29b169b1dc885606.js.map