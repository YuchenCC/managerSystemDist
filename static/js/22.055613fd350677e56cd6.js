webpackJsonp([22,54],{869:function(e,t,i){var n=i(215)(i(931),i(932),null,null);e.exports=n.exports},870:function(e,t,i){i(938);var n=i(215)(i(936),i(941),null,null);e.exports=n.exports},931:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(369),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=i(370);t.default={name:"Tree",computed:{tree:function(){return this.propData?this.propTree||[]:this.departmentTree()}},props:["reload","filter","propTree","propData","checkbox"],data:function(){return{defaultProps:{children:"child_list",label:"department_name"},selectDepartment:"",clickNode:{},expandKey:[],nodeLayer:0,filterText:""}},methods:(0,a.default)({},(0,r.mapActions)(["getDepartmentTree"]),(0,r.mapGetters)(["departmentTree"]),{initData:function(){var e=this;if(this.propData){if(this.tree[0]&&this.tree[0].department_id){var t=this.tree[0].department_id;this.$refs.tree.setCurrentKey(t,!0),this.selectDepartment=this.tree[0],this._callback(t)}}else this.getDepartmentTree().then(function(){if(e.tree[0]&&e.tree[0].department_id){var t=e.tree[0].department_id;e.$refs.tree.setCurrentKey(t,!0),e.selectDepartment=e.tree[0],e._callback(t)}})},reloadData:function(){var e=this;if(this.selectDepartment&&this.selectDepartment.department_id){var t=this.selectDepartment.department_id;this.getDepartmentTree().then(function(){e.$refs.tree.setCurrentKey(t,!0)}),this._callback(t,this.selectDepartment)}else this.initData()},treeClick:function(e,t){this.clickNode===t&&this.selectDepartment===e.id||(this.selectDepartment=e,this.clickNode=t,this.nodeLayer=t.level,this.getExpand(t,!0),this._callback(this.selectDepartment.department_id,e))},handleCheckChange:function(){},getExpand:function(e,t){t&&(this.expandKey=[]),e.isLeaf?this.getExpand(e.parent):this.expandKey.push(e.key)},filterNode:function(e,t){return!e||-1!==t.department_name.indexOf(e)},_callback:function(e,t){this.$emit("callback",{id:e,nodeLayer:this.nodeLayer,selectDepartment:this.selectDepartment,_data:t})}}),mounted:function(){this.initData()},watch:{reload:function(){this.reload.reload&&(this.reload.init&&(this.selectDepartment={}),this.reloadData(),this.$emit("finishReload"))},filterText:function(e){this.$refs.tree.filter(e)},propTree:function(){this.initData()}}}},932:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.filter?i("div",{staticClass:"searchInput"},[i("el-input",{attrs:{placeholder:"搜索"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1):e._e(),e._v(" "),i("el-tree",{ref:"tree",attrs:{data:e.tree,props:e.defaultProps,"node-key":"department_id","default-expanded-keys":e.expandKey,"filter-node-method":e.filterNode,"show-checkbox":e.checkbox||!1},on:{"node-click":e.treeClick,"check-change":e.handleCheckChange}})],1)},staticRenderFns:[]}},936:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(869),a=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default={name:"Dialog",components:{Tree:a.default},props:["dialogFormVisible"],computed:{visible:{get:function(){return this.dialogFormVisible},set:function(){}}},data:function(){return{showModal:!1,reloadTree:!1,treeBackData:{}}},mounted:function(){},methods:{closeDialog:function(e){this.$emit("closeDialog",this.treeBackData),"close"!==e&&(this.reloadTree=!0)},modalShow:function(){this.showModal=!0},closeModal:function(e){this.form.department=e},beforeClose:function(e){e(),this.$emit("closeDialog")},finishReload:function(){this.reloadTree=!1},treeCallback:function(e){console.log("treeCallback"),console.log(e),e.selectDepartment&&(this.treeBackData=e.selectDepartment)}}}},937:function(e,t,i){t=e.exports=i(867)(),t.push([e.i,".dialog_input_custom>input{height:28px;font-size:12px;top:1px;position:relative}.dialog_date_custom .el-input__prefix{top:-6px}","",{version:3,sources:["D:/桌面/personal/project/web-project/src/views/organization/employees/DepartmentSelect.vue"],names:[],mappings:"AACA,2BACE,YAAa,AACb,eAAgB,AAChB,QAAS,AACT,iBAAmB,CACpB,AACD,sCACE,QAAU,CACX",file:"DepartmentSelect.vue",sourcesContent:["\n.dialog_input_custom > input {\n  height: 28px;\n  font-size: 12px;\n  top: 1px;\n  position: relative;\n}\n.dialog_date_custom .el-input__prefix {\n  top: -6px;\n}\n"],sourceRoot:""}])},938:function(e,t,i){var n=i(937);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(868)("d5be57c0",n,!0)},941:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{visible:e.visible,"before-close":e.beforeClose,"append-to-body":!1,"modal-append-to-body":!1,title:"选择部门",width:"500px"},on:{"update:visible":function(t){e.visible=t}}},[i("div",{staticClass:"p15"},[i("el-row",[i("el-col",{attrs:{span:20}},[i("Tree",{attrs:{reload:e.reloadTree},on:{callback:e.treeCallback,finishReload:e.finishReload}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer mt10",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.closeDialog("save")}}},[e._v("保 存")]),e._v(" "),i("el-button",{on:{click:function(t){e.closeDialog("close")}}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=22.055613fd350677e56cd6.js.map