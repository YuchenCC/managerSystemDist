{"version":3,"sources":["webpack:///static/js/54.d5f8124711b29bad41b8.js","webpack:///./src/views/organization/common/Tree.vue?8d8b******","webpack:///Tree.vue?85a5******","webpack:///./src/views/organization/common/Tree.vue?f550*******"],"names":["webpackJsonp","869","module","exports","__webpack_require__","Component","931","Object","defineProperty","value","_extends2","_extends3","obj","__esModule","default","_vuex","name","computed","tree","this","propData","propTree","departmentTree","props","data","defaultProps","children","label","selectDepartment","clickNode","expandKey","nodeLayer","filterText","methods","mapActions","mapGetters","initData","_this","id","$refs","setCurrentKey","_callback","getDepartmentTree","then","_id","reloadData","_this2","treeClick","node","level","getExpand","handleCheckChange","reset","isLeaf","parent","push","key","filterNode","indexOf","$emit","_data","mounted","watch","reload","init","val","filter","932","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","placeholder","model","callback","$$v","expression","slot","_e","_v","ref","node-key","default-expanded-keys","filter-node-method","show-checkbox","checkbox","on","node-click","check-change","staticRenderFns"],"mappings":"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","file":"static/js/54.d5f8124711b29bad41b8.js","sourcesContent":["webpackJsonp([54],{\n\n/***/ 869:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(215)(\n  /* script */\n  __webpack_require__(931),\n  /* template */\n  __webpack_require__(932),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 931:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = __webpack_require__(369);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _vuex = __webpack_require__(370);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  name: 'Tree',\n  computed: {\n    tree: function tree() {\n      if (this.propData) {\n        return this.propTree || [];\n      }\n      return this.departmentTree();\n    }\n  },\n  props: ['reload', 'filter', 'propTree', 'propData', 'checkbox'],\n  data: function data() {\n    return {\n      defaultProps: {\n        children: 'child_list',\n        label: 'department_name'\n      },\n      selectDepartment: '',\n      clickNode: {},\n      expandKey: [],\n      nodeLayer: 0,\n      filterText: ''\n    };\n  },\n\n  methods: (0, _extends3.default)({}, (0, _vuex.mapActions)(['getDepartmentTree']), (0, _vuex.mapGetters)(['departmentTree']), {\n    initData: function initData() {\n      var _this = this;\n\n      if (this.propData) {\n        if (this.tree[0] && this.tree[0]['department_id']) {\n          var id = this.tree[0]['department_id'];\n          this.$refs.tree.setCurrentKey(id, true);\n\n          this.selectDepartment = this.tree[0];\n          this._callback(id);\n        }\n      } else {\n        this.getDepartmentTree().then(function () {\n          if (_this.tree[0] && _this.tree[0]['department_id']) {\n            var _id = _this.tree[0]['department_id'];\n            _this.$refs.tree.setCurrentKey(_id, true);\n\n            _this.selectDepartment = _this.tree[0];\n            _this._callback(_id);\n          }\n        });\n      }\n    },\n    reloadData: function reloadData() {\n      var _this2 = this;\n\n      if (this.selectDepartment && this.selectDepartment['department_id']) {\n        var id = this.selectDepartment['department_id'];\n        this.getDepartmentTree().then(function () {\n          _this2.$refs.tree.setCurrentKey(id, true);\n        });\n        this._callback(id, this.selectDepartment);\n      } else {\n        this.initData();\n      }\n    },\n    treeClick: function treeClick(obj, node) {\n      if (this.clickNode === node && this.selectDepartment === obj.id) {\n        return;\n      }\n      this.selectDepartment = obj;\n      this.clickNode = node;\n      this.nodeLayer = node.level;\n      this.getExpand(node, true);\n      this._callback(this.selectDepartment['department_id'], obj);\n    },\n    handleCheckChange: function handleCheckChange() {},\n    getExpand: function getExpand(node, reset) {\n      if (reset) {\n        this.expandKey = [];\n      }\n      if (node.isLeaf) {\n        this.getExpand(node.parent);\n      } else {\n        this.expandKey.push(node.key);\n      }\n    },\n    filterNode: function filterNode(value, data) {\n      if (!value) return true;\n      return data['department_name'].indexOf(value) !== -1;\n    },\n    _callback: function _callback(id, obj) {\n      this.$emit('callback', { id: id, nodeLayer: this.nodeLayer, selectDepartment: this.selectDepartment, _data: obj });\n    }\n  }),\n  mounted: function mounted() {\n    this.initData();\n  },\n\n  watch: {\n    reload: function reload() {\n      if (this.reload.reload) {\n        if (this.reload.init) {\n          this.selectDepartment = {};\n        }\n        this.reloadData();\n        this.$emit('finishReload');\n      }\n    },\n    filterText: function filterText(val) {\n      this.$refs.tree.filter(val);\n    },\n    propTree: function propTree() {\n      this.initData();\n    }\n  }\n};\n\n/***/ }),\n\n/***/ 932:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [(_vm.filter) ? _c('div', {\n    staticClass: \"searchInput\"\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": \"搜索\"\n    },\n    model: {\n      value: (_vm.filterText),\n      callback: function($$v) {\n        _vm.filterText = $$v\n      },\n      expression: \"filterText\"\n    }\n  }, [_c('i', {\n    staticClass: \"el-input__icon el-icon-search\",\n    attrs: {\n      \"slot\": \"prefix\"\n    },\n    slot: \"prefix\"\n  })])], 1) : _vm._e(), _vm._v(\" \"), _c('el-tree', {\n    ref: \"tree\",\n    attrs: {\n      \"data\": _vm.tree,\n      \"props\": _vm.defaultProps,\n      \"node-key\": \"department_id\",\n      \"default-expanded-keys\": _vm.expandKey,\n      \"filter-node-method\": _vm.filterNode,\n      \"show-checkbox\": _vm.checkbox || false\n    },\n    on: {\n      \"node-click\": _vm.treeClick,\n      \"check-change\": _vm.handleCheckChange\n    }\n  })], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/54.d5f8124711b29bad41b8.js","var Component = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Tree.vue\"),\n  /* template */\n  require(\"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6ef36022\\\"}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Tree.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/organization/common/Tree.vue\n// module id = 869\n// module chunks = 3 4 8 9 10 22 23 54","<template>\n  <div>\n    <div class='searchInput' v-if=\"filter\">\n      <el-input\n        placeholder='搜索'\n        v-model='filterText'>\n        <i slot='prefix' class='el-input__icon el-icon-search'></i>\n      </el-input>\n    </div>\n    <el-tree\n      :data='tree'\n      :props='defaultProps'\n      node-key=\"department_id\"\n      @node-click=\"treeClick\"\n      :default-expanded-keys=\"expandKey\"\n      ref=\"tree\"\n      :filter-node-method=\"filterNode\"\n      :show-checkbox=\"checkbox || false\"\n      @check-change=\"handleCheckChange\"\n    >\n    </el-tree>\n  </div>\n</template>\n\n<script>\n  import {mapActions, mapGetters} from 'vuex'\n\n  export default {\n    name: 'Tree',\n    computed: {\n      tree() {\n        if (this.propData) {\n          return this.propTree || []\n        }\n        return this.departmentTree()\n      }\n    },\n    props: ['reload', 'filter', 'propTree', 'propData', 'checkbox'],\n    data() {\n      return {\n        defaultProps: {\n          children: 'child_list',\n          label: 'department_name'\n        },\n        selectDepartment: '',\n        clickNode: {},\n        expandKey: [],\n        nodeLayer: 0,\n        filterText: ''\n      }\n    },\n    methods: {\n      ...mapActions(['getDepartmentTree']),\n      ...mapGetters(['departmentTree']),\n      initData() {\n        if (this.propData) {\n          if (this.tree[0] && this.tree[0]['department_id']) {\n            let id = this.tree[0]['department_id']\n            this.$refs.tree.setCurrentKey(id, true)\n            // this.expandKey[0] = this.tree[0]['department_id']  默认展开\n            this.selectDepartment = this.tree[0]\n            this._callback(id)\n          }\n        } else {\n          this.getDepartmentTree().then(() => {\n            if (this.tree[0] && this.tree[0]['department_id']) {\n              let id = this.tree[0]['department_id']\n              this.$refs.tree.setCurrentKey(id, true)\n              // this.expandKey[0] = this.tree[0]['department_id']  默认展开\n              this.selectDepartment = this.tree[0]\n              this._callback(id)\n            }\n          })\n        }\n      },\n      reloadData() {\n        if (this.selectDepartment && this.selectDepartment['department_id']) {\n          let id = this.selectDepartment['department_id']\n          this.getDepartmentTree().then(() => {\n            this.$refs.tree.setCurrentKey(id, true)\n          })\n          this._callback(id, this.selectDepartment)\n        } else {\n          this.initData()\n        }\n      },\n      treeClick(obj, node) {\n        if (this.clickNode === node && this.selectDepartment === obj.id) {\n          return\n        }\n        this.selectDepartment = obj\n        this.clickNode = node\n        this.nodeLayer = node.level\n        this.getExpand(node, true)\n        this._callback(this.selectDepartment['department_id'], obj)\n      },\n      handleCheckChange() {\n\n      },\n      getExpand(node, reset) {\n        if (reset) {\n          this.expandKey = []\n        }\n        if (node.isLeaf) {\n          this.getExpand(node.parent)\n        } else {\n          this.expandKey.push(node.key)\n        }\n      },\n      filterNode(value, data) {\n        if (!value) return true\n        return data['department_name'].indexOf(value) !== -1\n      },\n      _callback(id, obj) {\n        this.$emit('callback', {id, nodeLayer: this.nodeLayer, selectDepartment: this.selectDepartment, _data: obj})\n      }\n    },\n    mounted() {\n      this.initData()\n    },\n    watch: {\n      reload() {\n        if(this.reload.reload) {\n          if (this.reload.init) {\n            this.selectDepartment = {}\n          }\n          this.reloadData()\n          this.$emit('finishReload')\n        }\n      },\n      filterText(val) {\n        this.$refs.tree.filter(val)\n      },\n      propTree() {\n        this.initData()\n      }\n    }\n  }\n</script>\n\n\n// WEBPACK FOOTER //\n// Tree.vue?702ed200","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [(_vm.filter) ? _c('div', {\n    staticClass: \"searchInput\"\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": \"搜索\"\n    },\n    model: {\n      value: (_vm.filterText),\n      callback: function($$v) {\n        _vm.filterText = $$v\n      },\n      expression: \"filterText\"\n    }\n  }, [_c('i', {\n    staticClass: \"el-input__icon el-icon-search\",\n    attrs: {\n      \"slot\": \"prefix\"\n    },\n    slot: \"prefix\"\n  })])], 1) : _vm._e(), _vm._v(\" \"), _c('el-tree', {\n    ref: \"tree\",\n    attrs: {\n      \"data\": _vm.tree,\n      \"props\": _vm.defaultProps,\n      \"node-key\": \"department_id\",\n      \"default-expanded-keys\": _vm.expandKey,\n      \"filter-node-method\": _vm.filterNode,\n      \"show-checkbox\": _vm.checkbox || false\n    },\n    on: {\n      \"node-click\": _vm.treeClick,\n      \"check-change\": _vm.handleCheckChange\n    }\n  })], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-6ef36022\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/organization/common/Tree.vue\n// module id = 932\n// module chunks = 3 4 8 9 10 22 23 54"],"sourceRoot":""}