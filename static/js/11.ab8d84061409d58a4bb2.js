webpackJsonp([11,25],{1079:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(141),r=l(i),n=a(930),o=l(n),s=a(1089);t.default={data:function(){return{detailForm:{linkmen:[]},detailFormRule:{customer_name:[o.default.required({message:"请输入客户名称"}),o.default.max({max:50,message:"最多不能超过50个字"}),o.default.min({min:2,message:"至少2个字"})],social_credit_code:[o.default.required({message:"请输入社会信用代码"})],industry_type_id:[o.default.required({message:"请选择行业大类"})],industry_subtype_id:[o.default.required({message:"请选择行业子类"})],linkmen:[]},fileList:[]}},props:{value:{type:Boolean,default:!1}},created:function(){this.initContactForm()},methods:{dialogClose:function(){this.dialogVisible=!1,this.$emit("input",!1)},confirm:function(){this.dialogClose(),this.$emit("reload-list")},save:function(){},addContactor:function(){},initContactForm:function(){this.detailForm.linkmen=[],this.detailFormRule.linkmen=[];for(var e=0;e<2;e++){var t=0==e?1:0;this.detailForm.linkmen.push((0,r.default)({},s.contactData,{is_primary:t})),this.detailFormRule.linkmen.push(s.contactRule)}},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 10 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")}}}},1089:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contactData=t.contactRule=void 0;var l=a(930),i=function(e){return e&&e.__esModule?e:{default:e}}(l);t.contactRule={linkman_name:[i.default.required({message:"请输入姓名"}),i.default.max({max:20,message:"最多不能超过20个字"}),i.default.min({min:2,message:"至少2个字"})],linkman_contact:[{validator:i.default.phone}],linkman_post:[i.default.required({message:"请输入联系人职务"})]},t.contactData={linkman_name:"",linkman_contact:"",linkman_post:""}},1100:function(e,t,a){t=e.exports=a(867)(),t.push([e.i,".detail-modal .el-dialog__body{padding:30px 40px}.detail-modal .block-title,.detail-modal .el-dialog__header{border-bottom:1px solid #999}.detail-modal .block-title{font-size:16px;line-height:2;font-weight:700;margin-bottom:15px}","",{version:3,sources:["D:/桌面/personal/project/web-project/src/views/project/modalDetail.vue"],names:[],mappings:"AACA,+BACE,iBAAmB,CACpB,AAID,4DAFE,4BAA8B,CAQ/B,AAND,2BACE,eAAgB,AAChB,cAAe,AACf,gBAAkB,AAElB,kBAAoB,CACrB",file:"modalDetail.vue",sourcesContent:["\n.detail-modal .el-dialog__body {\n  padding: 30px 40px;\n}\n.detail-modal .el-dialog__header {\n  border-bottom: 1px solid #999;\n}\n.detail-modal .block-title {\n  font-size: 16px;\n  line-height: 2;\n  font-weight: bold;\n  border-bottom: 1px solid #999;\n  margin-bottom: 15px;\n}\n"],sourceRoot:""}])},1116:function(e,t,a){var l=a(1100);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a(868)("4c3f007f",l,!0)},1136:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"detail-modal",attrs:{title:"新建客户",visible:e.value,width:"660px","append-to-body":"","before-close":e.dialogClose},on:{"update:visible":function(t){e.value=t}}},[a("div",{staticClass:"customer-detail"},[a("el-form",{ref:"detailForm",attrs:{model:e.detailForm,rules:e.detailFormRule,size:"small","label-width":"110px"}},[a("el-form-item",{attrs:{label:"客户名称：",prop:"customer_name"}},[a("el-input",{model:{value:e.detailForm.customer_name,callback:function(t){e.$set(e.detailForm,"customer_name",t)},expression:"detailForm.customer_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"社会信用代码：",prop:"social_credit_code"}},[a("el-input",{model:{value:e.detailForm.social_credit_code,callback:function(t){e.$set(e.detailForm,"social_credit_code",t)},expression:"detailForm.social_credit_code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"客户级别：",prop:"customer_level"}},[a("el-input",{model:{value:e.detailForm.customer_level,callback:function(t){e.$set(e.detailForm,"customer_level",t)},expression:"detailForm.customer_level"}})],1),e._v(" "),a("div",{staticClass:"box-flex"},[a("el-form-item",{staticClass:"mr15",attrs:{label:"行业类型：",prop:"industry_type_id"}},[a("el-select",{staticClass:"w180",model:{value:e.detailForm.industry_type_id,callback:function(t){e.$set(e.detailForm,"industry_type_id",t)},expression:"detailForm.industry_type_id"}})],1),e._v(" "),a("el-form-item",{staticClass:"flex-one",attrs:{prop:"industry_subtype_id","label-width":"0"}},[a("el-select",{staticClass:"wp100",model:{value:e.detailForm.industry_subtype_id,callback:function(t){e.$set(e.detailForm,"industry_subtype_id",t)},expression:"detailForm.industry_subtype_id"}})],1)],1),e._v(" "),a("div",{staticClass:"block-title"},[e._v("\n                    联系人\n                ")]),e._v(" "),e._l(e.detailForm.linkmen,function(t,l){return a("div",{key:l},[a("div",{staticClass:"box-flex"},[a("el-form-item",{attrs:{label:t.is_primary?"主要联系人：":"联系人",prop:"linkmen."+l+".linkman_name",rules:e.detailFormRule.linkmen[l].linkman_name}},[a("el-input",{staticClass:"w150 mr15",attrs:{placeholder:"姓名"},model:{value:t.linkman_name,callback:function(a){e.$set(t,"linkman_name",a)},expression:"item.linkman_name"}})],1),e._v(" "),a("el-form-item",{staticClass:"wp100",attrs:{"label-width":"0px",prop:"linkmen."+l+".linkman_contact",rules:e.detailFormRule.linkmen[l].linkman_contact}},[a("el-input",{attrs:{placeholder:"联系方式"},model:{value:t.linkman_contact,callback:function(a){e.$set(t,"linkman_contact",a)},expression:"item.linkman_contact"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"职务：",prop:"linkmen."+l+".linkman_post",rules:e.detailFormRule.linkmen[l].linkman_post}},[a("el-input",{attrs:{placeholder:"职务"},model:{value:t.linkman_post,callback:function(a){e.$set(t,"linkman_post",a)},expression:"item.linkman_post"}})],1)],1)}),e._v(" "),a("el-form-item",[a("el-button",{attrs:{plain:"",type:"primary"}},[e._v("添加联系人")])],1),e._v(" "),a("div",{staticClass:"block-title"},[e._v("\n                    详细信息\n                ")]),e._v(" "),a("el-form-item",{attrs:{label:"省市："}}),e._v(" "),a("el-form-item",{attrs:{label:"详细地址：",prop:"address"}},[a("el-input",{model:{value:e.detailForm.address,callback:function(t){e.$set(e.detailForm,"address",t)},expression:"detailForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"公司网址：",prop:"website"}},[a("el-input",{model:{value:e.detailForm.website,callback:function(t){e.$set(e.detailForm,"website",t)},expression:"detailForm.website"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"营业额：(元)",prop:"turnover"}},[a("el-input",{model:{value:e.detailForm.turnover,callback:function(t){e.$set(e.detailForm,"turnover",t)},expression:"detailForm.turnover"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"员工数：",prop:"staff_num"}},[a("el-input",{model:{value:e.detailForm.staff_num,callback:function(t){e.$set(e.detailForm,"staff_num",t)},expression:"detailForm.staff_num"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"主营业务：",prop:"primary_business"}},[a("el-input",{model:{value:e.detailForm.primary_business,callback:function(t){e.$set(e.detailForm,"primary_business",t)},expression:"detailForm.primary_business"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"营业执照：",prop:"business_licence_img"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,multiple:"",limit:3,"on-exceed":e.handleExceed,"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择文件")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("请提供证件的原件照片或彩色扫描件，文字/盖章清晰可辨认，jpg、jpeg、pngges ，不超过10MB")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"附件："}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,multiple:"",limit:3,"on-exceed":e.handleExceed,"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择文件")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"客户概述：",prop:"customer_summary"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.detailForm.customer_summary,callback:function(t){e.$set(e.detailForm,"customer_summary",t)},expression:"detailForm.customer_summary"}})],1)],2)],1),e._v(" "),a("div",{staticClass:"dialog-footer tc",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.dialogClose}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]}},1168:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(218),r=l(i),n=a(141),o=l(n),s=a(217),u=l(s),m=a(142),c=l(m),d=a(928),p=l(d),v=a(929),_=a(8),f=a(883),b=l(f);t.default={data:function(){return{industryType:[],dateRange:"",customerLevel:v.customerLevel,query:{name:"",industry_type_id:"",customer_level:"",director_name:"",create_time:null},detailVisible:!1}},mixins:[p.default],created:function(){},components:{modalDetail:b.default},methods:{_loadList:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(r.default.mark(function e(){var t,a,l;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,a=(0,_.removeEmpty)((0,o.default)({},t.query)),e.next=4,c.default.customer.getCustomerList(t.assignQuery(a));case 4:l=e.sent,console.log(l),t.initialTableData(l.rows,l.total);case 7:case"end":return e.stop()}},e,this)}));return e}(),toEdit:function(e){this.$router.push({name:"projectEdit",params:{planId:e.id}})},toDel:function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(r.default.mark(function e(t){var a,l,i;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=this,l=c.default.customer.checkIsDelCustomer(t.id),l.result&&(i=c.default.customer.delCustomerById(t.id),a.$alert(""));case 3:case"end":return e.stop()}},e,this)}));return e}(),toOpen:function(){},onRangeChange:function(e){this.query.startTime=e[0]||"",this.query.endTime=e[1]||""},exportExcel:function(){},toNewCustomer:function(){this.detailVisible=!0}}}},1272:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"project-list"},[a("el-form",{ref:"searchForm",attrs:{model:e.query,inline:!0,size:"small"}},[a("el-form-item",[a("el-input",{staticClass:"w150",attrs:{placeholder:"客户名称/联系人"},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}})],1),e._v(" "),a("el-form-item",[a("el-select",{staticClass:"w150",attrs:{id:"keyDown",size:"small",placeholder:""},model:{value:e.query.industry_type_id,callback:function(t){e.$set(e.query,"industry_type_id",t)},expression:"query.industry_type_id"}},e._l(e.industryType,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",[a("el-select",{staticClass:"w150",attrs:{id:"keyDown",size:"small",placeholder:""},model:{value:e.query.customer_level,callback:function(t){e.$set(e.query,"customer_level",t)},expression:"query.customer_level"}},e._l(e.customerLevel,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",[a("el-input",{staticClass:"w150",attrs:{placeholder:"负责人姓名"},model:{value:e.query.director_name,callback:function(t){e.$set(e.query,"director_name",t)},expression:"query.director_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"计划时间:",prop:""}},[a("el-date-picker",{staticClass:"w240",attrs:{type:"daterange",align:"right",placeholder:"选择日期范围","range-separator":"至 ",clearable:!1,size:"small"},on:{change:e.onRangeChange},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.onSearch}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.onReset}},[e._v("清空")])],1)],1),e._v(" "),a("div",{staticClass:"mb20"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.toNewCustomer}},[e._v("新建客户")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.exportExcel}},[e._v("导出")])],1),e._v(" "),a("el-table",{attrs:{data:e.tableParams.list,"header-align":"center",border:"","header-row-class-name":"header-center"}},[a("el-table-column",{attrs:{label:"客户名称",prop:"customer_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"联系人",prop:"linkman_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"所属行业",prop:"industry_type_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"所在地",prop:"city_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"客户级别",prop:"customer_level"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("customerLevel")(t.row.customer_level)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"负责人",prop:"director_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"create_time"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dateFormat")(t.row.create_time)))])]}}])}),e._v(" "),a("el-table-column",{staticClass:"tc",attrs:{label:"操作",fixed:"right",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.toOpen}},[e._v("\n\t\t服务开通")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(a){e.toEdit(t.row)}}},[e._v("\n\t\t编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.toDel}},[e._v("删除")])]}}])})],1),e._v(" "),e.tableParams.totalCount?a("el-pagination",{staticClass:"mt15",attrs:{"current-page":e.tableParams.currentPage,"page-sizes":e.tableParams.pageSizeList,"page-size":e.tableParams.pageSize,layout:e.tableParams.layout,total:e.tableParams.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),a("modal-detail",{on:{"reload-list":e._loadList},model:{value:e.detailVisible,callback:function(t){e.detailVisible=t},expression:"detailVisible"}})],1)},staticRenderFns:[]}},883:function(e,t,a){a(1116);var l=a(215)(a(1079),a(1136),null,null);e.exports=l.exports},911:function(e,t,a){var l=a(215)(a(1168),a(1272),null,null);e.exports=l.exports},928:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(216),r=l(i),n=a(369),o=l(n);t.default={data:function(){return{tableServer:{},tableDataList:[],tableSelectionItems:[],tableTotalCount:0,tableOption:{layout:"total, sizes, prev, pager, next, jumper",pageSizeList:[10,20,30,40]},tableParams:{page_size:10,page_num:1}}},mounted:function(){var e=this;this.initTableServer&&this.initTableServer().then(function(){e.requestData()})},computed:{selectedIds:function(){var e=this;return this.tableParams.selectedItems.map(function(t){return t[e.pk]})}},methods:{requestData:function(){var e=this;this.tableServer.loadTableData&&this.tableServer.extraParams.id&&this.tableServer.loadTableData(this.paramsHandler()).then(function(){e.initialTableData(e.tableServer.dataList())})},paramsHandler:function(){return(0,o.default)({},this.tableParams,this.tableServer.extraParams,this.tableServer.searchParams)},initialTableData:function(e){this.tableDataList=e.data_list,this.tableTotalCount=e.total_num,this.tableParams.page_size===e.page_size&&this.tableParams.page_num===e.page_num||(this.$message("当前页数不匹配"),console.log(e),this.tableParams.page_size=e.page_size,this.tableParams.page_num=e.page_num)},handleSizeChange:function(e){e&&e!==this.tableParams.page_size&&(this.tableParams.page_size=e,this.requestData())},handleCurrentChange:function(e){e&&this.tableParams.page_num!==e&&(this.tableParams.page_num=e,this.requestData())},onSelectionChange:function(e){this.tableSelectionItems=[].concat((0,r.default)(e))},assignQuery:function(e){return(0,o.default)({page_num:this.tableParams.pageNum,page_size:this.tableParams.pageSize},e)},onSearch:function(){this.tableParams.pageNum=1,this._loadList()}}}},929:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.planType=[{value:1,label:"日计划"},{value:2,label:"周计划"},{value:3,label:"月计划"}],t.planState=[{value:1,label:"草稿"},{value:2,label:"已发布"},{value:3,label:"删除"}],t.supportType=[{value:1,label:"资金"},{value:2,label:"技术支持"},{value:3,label:"协访"},{value:4,label:"其他"}],t.customerLevel=[{value:"",label:"全部客户级别"},{value:1,label:"VIP"},{value:2,label:"重要客户"},{value:3,label:"普通客户"}],t.capitalTypes=[{value:1,label:"自筹"},{value:2,label:"政府拨款"},{value:3,label:"其他"}],t.tenderTypes=[{value:1,label:"公开招标"},{value:2,label:"邀标"},{value:3,label:"竞争性谈判"},{value:4,label:"单一来源采购"},{value:5,label:"其他"}],t.roleTypes=[{value:1,label:"项目经办人"},{value:2,label:"经办负责人"},{value:3,label:"分管领导"},{value:4,label:"关键人"}],t.projectProgressTypes=[{value:"1",label:"初步洽谈"},{value:"2",label:"方案提交"},{value:"3",label:"立项"},{value:"4",label:"招标"},{value:"5",label:"运行调试"},{value:"6",label:"汇款"}],t.serviceStates=[{value:1,label:"运行中"},{value:2,label:"待审核"},{value:3,label:"审核拒绝"}]},930:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a(371),i=function(e){return e&&e.__esModule?e:{default:e}}(l),r=function(e,t,a){var l=/^\d{7,12}$/;""!=t&&l.test(t)?a():a(new Error("请输入正确的联系号码"))},n=function(e,t,a){""==t||0==t.length?a(new Error("请选择时间")):a()},o=function(e,t,a){"object"==(void 0===t?"undefined":(0,i.default)(t))&&(new Date).valueOf()<=t.valueOf()?a(new Error("不能选将来时间")):a()},s=function(e,t,a){var l=/^\d{1,7}(\.\d{1,2})?$/;t&&""!=t&&!l.test(t)?a(new Error("整数小于7位且小数点不能超过两位")):a()},u=function(e,t,a){var l=/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X|x)$/;null==t||""==t||l.test(t)?a():a(new Error("身份证号码格式有误"))},m=function(e,t,a,l){return l.c_name&&e.field==e.file?(""==t?a(new Error("该字段不能为空")):a(),!1):void a()},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,a=void 0===t?"不能为空":t,l=e.trigger;return{required:!0,message:a,trigger:void 0===l?"blur":l}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,a=void 0===t?"string":t,l=e.message,i=void 0===l?"不能多于1位":l,r=e.trigger,n=void 0===r?"blur":r,o=e.max;return{type:a,max:void 0===o?1:o,message:i,trigger:n}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,a=void 0===t?"string":t,l=e.message,i=void 0===l?"不能少于1位":l,r=e.trigger,n=void 0===r?"blur":r,o=e.min;return{type:a,min:void 0===o?1:o,message:i,trigger:n}};t.default={idCard:u,phone:r,required:c,max:d,min:p,pointLimit:s,cargoSection:m,curDateLimit:o,dataRange:n}}});
//# sourceMappingURL=11.ab8d84061409d58a4bb2.js.map