webpackJsonp([23,54],{1064:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{visible:e.visible,"before-close":e.beforeClose,"append-to-body":!1,"modal-append-to-body":!1,title:"选择人员",width:"800px"},on:{"update:visible":function(t){e.visible=t}}},[i("div",{staticClass:"role_dialog df pb20"},[i("div",[i("div",{staticClass:"mb5",staticStyle:{"font-size":"16px"}},[e._v("部门树")]),e._v(" "),i("div",{staticClass:"p15 w300 bl bt br bb of"},[i("el-row",[i("el-col",{attrs:{span:20}},[i("Tree",{attrs:{reload:e.reloadTree,propData:!0,propTree:this.treeData},on:{callback:e.treeCallback,finishReload:e.finishReload}})],1)],1)],1)]),e._v(" "),i("div",{staticClass:"select_dialog"},[i("div",[i("div",{staticClass:"mb5",staticStyle:{"font-size":"16px"}},[e._v("部门人员")]),e._v(" "),i("div",{staticClass:"p15 w300 bl bt br bb of"},[i("el-row",[e.staffList.length?i("el-col",{staticClass:"ml10 mr10 mt10 mb10",attrs:{span:20}},[i("el-checkbox",{attrs:{disabled:!e.totalLimit,indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v(e._s(e.departmentInfo.department_name))]),e._v(" "),i("div",{staticClass:"mt10 mb10"}),e._v(" "),i("el-checkbox-group",{staticClass:"ml10",attrs:{min:e.limitLength.min,max:e.totalLimit},on:{change:e.handleCheckedDepartmentStaffChange},model:{value:e.checkedEmployees,callback:function(t){e.checkedEmployees=t},expression:"checkedEmployees"}},e._l(e.staffList,function(t){return i("el-checkbox",{key:t.id,attrs:{label:t}},[e._v(e._s(t.staff_name))])}))],1):e._e()],1)],1)]),e._v(" "),i("div",[i("div",{staticClass:"mb5",staticStyle:{"font-size":"16px"}},[e._v("已选人员")]),e._v(" "),i("div",{staticClass:"p15 w300 bl bt br bb of"},[i("el-row",[i("el-col",{staticClass:"ml10 mr10 mt10 mb10",attrs:{span:20}},[i("el-checkbox-group",{staticClass:"ml10",attrs:{min:e.limitLength.min,max:e.limitLength.max},on:{change:e.handleCheckedDepartmentStaffChange},model:{value:e.checkedEmployees,callback:function(t){e.checkedEmployees=t},expression:"checkedEmployees"}},e._l(e.checkedEmployees,function(t){return i("el-checkbox",{key:t.id,attrs:{label:t}},[e._v(e._s(t.staff_name))])}))],1)],1)],1)])])]),e._v(" "),i("div",{staticClass:"dialog-footer mt10",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.closeDialog("save")}}},[e._v("保 存")]),e._v(" "),i("el-button",{on:{click:function(t){e.closeDialog("close")}}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]}},869:function(e,t,i){var a=i(215)(i(931),i(932),null,null);e.exports=a.exports},871:function(e,t,i){i(944);var a=i(215)(i(942),i(1064),"data-v-6067c4a3",null);e.exports=a.exports},931:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(369),n=function(e){return e&&e.__esModule?e:{default:e}}(a),s=i(370);t.default={name:"Tree",computed:{tree:function(){return this.propData?this.propTree||[]:this.departmentTree()}},props:["reload","filter","propTree","propData","checkbox"],data:function(){return{defaultProps:{children:"child_list",label:"department_name"},selectDepartment:"",clickNode:{},expandKey:[],nodeLayer:0,filterText:""}},methods:(0,n.default)({},(0,s.mapActions)(["getDepartmentTree"]),(0,s.mapGetters)(["departmentTree"]),{initData:function(){var e=this;if(this.propData){if(this.tree[0]&&this.tree[0].department_id){var t=this.tree[0].department_id;this.$refs.tree.setCurrentKey(t,!0),this.selectDepartment=this.tree[0],this._callback(t)}}else this.getDepartmentTree().then(function(){if(e.tree[0]&&e.tree[0].department_id){var t=e.tree[0].department_id;e.$refs.tree.setCurrentKey(t,!0),e.selectDepartment=e.tree[0],e._callback(t)}})},reloadData:function(){var e=this;if(this.selectDepartment&&this.selectDepartment.department_id){var t=this.selectDepartment.department_id;this.getDepartmentTree().then(function(){e.$refs.tree.setCurrentKey(t,!0)}),this._callback(t,this.selectDepartment)}else this.initData()},treeClick:function(e,t){this.clickNode===t&&this.selectDepartment===e.id||(this.selectDepartment=e,this.clickNode=t,this.nodeLayer=t.level,this.getExpand(t,!0),this._callback(this.selectDepartment.department_id,e))},handleCheckChange:function(){},getExpand:function(e,t){t&&(this.expandKey=[]),e.isLeaf?this.getExpand(e.parent):this.expandKey.push(e.key)},filterNode:function(e,t){return!e||-1!==t.department_name.indexOf(e)},_callback:function(e,t){this.$emit("callback",{id:e,nodeLayer:this.nodeLayer,selectDepartment:this.selectDepartment,_data:t})}}),mounted:function(){this.initData()},watch:{reload:function(){this.reload.reload&&(this.reload.init&&(this.selectDepartment={}),this.reloadData(),this.$emit("finishReload"))},filterText:function(e){this.$refs.tree.filter(e)},propTree:function(){this.initData()}}}},932:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.filter?i("div",{staticClass:"searchInput"},[i("el-input",{attrs:{placeholder:"搜索"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1):e._e(),e._v(" "),i("el-tree",{ref:"tree",attrs:{data:e.tree,props:e.defaultProps,"node-key":"department_id","default-expanded-keys":e.expandKey,"filter-node-method":e.filterNode,"show-checkbox":e.checkbox||!1},on:{"node-click":e.treeClick,"check-change":e.handleCheckChange}})],1)},staticRenderFns:[]}},942:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(216),s=a(n),l=i(369),o=a(l),c=i(869),r=a(c),d=i(370);t.default={name:"Dialog",components:{Tree:r.default},props:["dialogFormVisible","limit"],computed:{visible:{get:function(){return this.dialogFormVisible},set:function(){}},treeData:function(){return this.staffTree()},limitLength:function(){var e={min:0,max:9999};return console.log(e),this.limit&&(this.limit instanceof Array?(e.min=Number(this.limit[0])||0,e.max=Number(this.limit[1])||9999):e.max=Number(this.limit)||9999),e}},data:function(){return{totalLimit:9999,checkAll:!1,showModal:!1,reloadTree:!1,treeBackData:{},departmentInfo:{},staffList:[],checkedEmployees:[],isIndeterminate:!0}},mounted:function(){this.initTree()},methods:(0,o.default)({},(0,d.mapActions)(["getStaffTree"]),(0,d.mapGetters)(["staffTree"]),{closeDialog:function(e){this.$emit("closeDialog",this.checkedEmployees),"close"!==e&&(this.reloadTree=!0)},dataHandler:function(e){this.departmentInfo={department_id:e.department_id||"",department_name:e.department_name||""},this.staffList=[].concat((0,s.default)(e.staff_list||[]))},modalShow:function(){this.showModal=!0},closeModal:function(e){this.form.department=e},beforeClose:function(e){e(),this.$emit("closeDialog")},finishReload:function(){this.reloadTree=!1},treeCallback:function(e){e._data&&this.dataHandler(e._data)},initTree:function(){this.getStaffTree()},handleCheckAllChange:function(e){var t=this;if(e){var i=[];this.staffList.forEach(function(e){var a=1;t.checkedEmployees.length&&t.checkedEmployees.forEach(function(t){e.id===t.id&&(a=0)}),a&&i.push(e)}),this.checkedEmployees=[].concat((0,s.default)(this.checkedEmployees),i)}else this.staffList.forEach(function(e){var i=null;t.checkedEmployees.length&&t.checkedEmployees.forEach(function(t,a){e.id===t.id&&(i=a)}),(i||0===i)&&t.checkedEmployees.splice(i,1)});this.isIndeterminate=!1},handleCheckedDepartmentStaffChange:function(e){this.computedCheck(e)},computedCheck:function(e){var t=this,i=e||this.checkedEmployees,a=0;i.length&&i.forEach(function(e){t.staffList.length&&t.staffList.forEach(function(t){t.id===e.id&&(a+=1)})}),this.checkAll=a===this.staffList.length,this.isIndeterminate=a>0&&a<this.staffList.length}}),watch:{staffList:function(){0===this.staffList.length?(this.checkAll=!1,this.isIndeterminate=!0):this.computedCheck()},checkedEmployees:function(){console.log(this.checkedEmployees);var e=this.checkedEmployees.length;console.log(this.limitLength);var t=this.limitLength.max;this.totalLimit=t-e,console.log(this.totalLimit)}}}},943:function(e,t,i){t=e.exports=i(867)(),t.push([e.i,".role_dialog[data-v-6067c4a3]{justify-content:space-around;height:360px}.of[data-v-6067c4a3]{height:100%;overflow:auto}.select_dialog[data-v-6067c4a3]{display:flex;justify-content:space-between;flex-direction:column}.select_dialog>div[data-v-6067c4a3]{height:150px}","",{version:3,sources:["D:/桌面/personal/project/web-project/src/views/organization/common/RoleSelect.vue"],names:[],mappings:"AACA,8BACE,6BAA8B,AAC9B,YAAc,CACf,AACD,qBACE,YAAa,AACb,aAAe,CAChB,AACD,gCACE,aAAc,AACd,8BAA+B,AAC/B,qBAAuB,CACxB,AACD,oCACI,YAAc,CACjB",file:"RoleSelect.vue",sourcesContent:["\n.role_dialog[data-v-6067c4a3] {\n  justify-content: space-around;\n  height: 360px;\n}\n.of[data-v-6067c4a3] {\n  height: 100%;\n  overflow: auto;\n}\n.select_dialog[data-v-6067c4a3] {\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n}\n.select_dialog > div[data-v-6067c4a3] {\n    height: 150px;\n}\n"],sourceRoot:""}])},944:function(e,t,i){var a=i(943);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(868)("36ef5677",a,!0)}});
//# sourceMappingURL=23.627a749155da76ef658c.js.map