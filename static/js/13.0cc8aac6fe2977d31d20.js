webpackJsonp([13,26],{1066:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function r(){return(0,p.default)({},d)}function o(){return[{id:"id",project_no:"project_no",project_name:"project_name",customer_id:"customer_id",customer_name:"customer_name",stakeholder_name:"stakeholder_name",stakeholder_contact:"stakeholder_contact",progress_name:"1",create_time:"create_time",customer_level:1,director_name:"director_name"}]}function s(){var e=(0,c.default)({},_);return console.log("project",_),e.stakeholders=[(0,c.default)({},m)],e}function n(){return{project_name:[{required:!0,message:"必填字段"},{min:2,max:50,message:"长度在 2 到 50 个字符"}],customer_name:[{required:!0,message:"必填字段"},{min:2,max:50,message:"长度在 2 到 50 个字符"}],progress_id:[{required:!0,message:"必填字段"}],stakeholders:[]}}Object.defineProperty(t,"__esModule",{value:!0}),t.project=t.stakeholders=t.projectListQuery=void 0;var i=a(369),c=l(i),u=a(141),p=l(u);t.initProjectListQuery=r,t.getTestListData=o,t.initProject=s,t.initRule=n;var d=t.projectListQuery={project_name:"",customer_name:"",industry_type_id:"",progress:"",director_name:"",create_time:null},m=t.stakeholders={name:"test_name",contact:"test_contact",post:"test_post",role_type:"test_role_type"},_=t.project={project_name:"test_project_name",customer_id:"",customer_name:"test_customer_name",capital_type:1,tender_type:1,progress_id:"1",demand_summary:"test_demand_summary",budget:20,history_supplier:"test_history_supplier",competitor:"test_competitor",stakeholders:[],project_remark:"test_project_remark"}},1078:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a(1066),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(l),o=a(929);t.default={props:{value:{default:!1},project:{default:function(){return r.initProject()}}},data:function(){return{rules:r.initRule(),capitalTypes:o.capitalTypes,tenderTypes:o.tenderTypes,roleTypes:o.roleTypes,projectProgressTypes:o.projectProgressTypes,dialogShow:this.value,refForm:null}},watch:{value:function(e,t){this.dialogShow=e},dialogShow:function(e,t){var a=this;this.$emit("input",e),this.$nextTick(function(){a.refForm||(a.refForm=a.$refs.form),a.refForm.resetFields()})},projectId:function(e,t){e&&this.loadProjectDetail()}},mixins:[],methods:{loadProjectDetail:function(){console.log("loadProjectDetail")},closeDialog:function(){this.dialogShow=!1},doSave:function(){var e=this;this.project.id?this.$api.project.updateProjetMan(this.project).then(function(t){e.$emit("on-save")}):this.$api.project.addProject(this.project).then(function(t){e.$emit("on-save")})},doCancel:function(){console.log("doCancel"),this.closeDialog()},addContactMan:function(){console.log("addContactMan")}},created:function(){},mounted:function(){}}},1098:function(e,t,a){t=e.exports=a(867)(),t.push([e.i,".project-edit .tit{line-height:2.5;border-bottom:1px solid #ddd;font-size:14px}.project-edit .el-form-item .el-form-item{margin-bottom:22px}.project-edit .form{width:540px;margin:0 auto}.project-edit .ml110{margin-left:110px}","",{version:3,sources:["D:/桌面/personal/project/web-project/src/views/project/list/edit-modal.vue"],names:[],mappings:"AACA,mBACE,gBAAiB,AACjB,6BAA8B,AAC9B,cAAgB,CACjB,AACD,0CACE,kBAAoB,CACrB,AACD,oBACE,YAAa,AACb,aAAe,CAChB,AACD,qBACE,iBAAmB,CACpB",file:"edit-modal.vue",sourcesContent:["\n.project-edit .tit {\n  line-height: 2.5;\n  border-bottom: 1px solid #ddd;\n  font-size: 14px;\n}\n.project-edit .el-form-item .el-form-item {\n  margin-bottom: 22px;\n}\n.project-edit .form {\n  width: 540px;\n  margin: 0 auto;\n}\n.project-edit .ml110 {\n  margin-left: 110px;\n}\n"],sourceRoot:""}])},1114:function(e,t,a){var l=a(1098);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a(868)("e326d5e8",l,!0)},1134:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"project-edit",attrs:{visible:e.dialogShow,"append-to-body":"","before-close":e.closeDialog,width:"720px"},on:{"update:visible":function(t){e.dialogShow=t}}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"tit"},[e._v("新建项目")])]),e._v(" "),a("el-form",{ref:"form",staticClass:"form",attrs:{model:e.project,rules:e.rules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"项目名称：",prop:"project_name"}},[a("el-input",{attrs:{placeholder:"请输入项目名称"},model:{value:e.project.project_name,callback:function(t){e.$set(e.project,"project_name",t)},expression:"project.project_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"客户名称：",prop:"customer_name"}},[a("el-input",{attrs:{placeholder:"请输入客户名称"},model:{value:e.project.customer_name,callback:function(t){e.$set(e.project,"customer_name",t)},expression:"project.customer_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"资金来源："}},[a("el-select",{attrs:{placeholder:"请选择资金来源"},model:{value:e.project.capital_type,callback:function(t){e.$set(e.project,"capital_type",t)},expression:"project.capital_type"}},e._l(e.capitalTypes,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"招标方式："}},[a("el-select",{attrs:{placeholder:"请选择招标方式"},model:{value:e.project.tender_type,callback:function(t){e.$set(e.project,"tender_type",t)},expression:"project.tender_type"}},e._l(e.tenderTypes,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"项目进展：",prop:"progress_id"}},[a("el-select",{attrs:{placeholder:"请选择销售阶段"},model:{value:e.project.progress_id,callback:function(t){e.$set(e.project,"progress_id",t)},expression:"project.progress_id"}},e._l(e.projectProgressTypes,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"tit mb20"},[e._v("采购意向")]),e._v(" "),a("el-form-item",{attrs:{label:"需求概述："}},[a("el-input",{attrs:{placeholder:"请输入需求概述"},model:{value:e.project.demand_summary,callback:function(t){e.$set(e.project,"demand_summary",t)},expression:"project.demand_summary"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"资金预算："}},[a("el-input",{attrs:{placeholder:"请输入资金预算"},model:{value:e.project.budget,callback:function(t){e.$set(e.project,"budget",t)},expression:"project.budget"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"历史供应商："}},[a("el-input",{attrs:{placeholder:"请输入历史供应商"},model:{value:e.project.history_supplier,callback:function(t){e.$set(e.project,"history_supplier",t)},expression:"project.history_supplier"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"竞争产品："}},[a("el-input",{attrs:{placeholder:"请输入竞争产品"},model:{value:e.project.competitor,callback:function(t){e.$set(e.project,"competitor",t)},expression:"project.competitor"}})],1),e._v(" "),a("div",{staticClass:"tit mb20"},[e._v("项目干系人")]),e._v(" "),e._l(e.project.stakeholders,function(t,l){return a("div",{key:l,staticClass:"el-form-item"},[a("div",{staticClass:"el-form-item__label w110"},[e._v("干系人：")]),e._v(" "),a("div",{staticClass:"el-form-item__content ml110"},[a("el-row",[a("el-col",{staticClass:"pr10",attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"0"}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"linkMan.name"}})],1)],1),e._v(" "),a("el-col",{staticClass:"pr10",attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"0"}},[a("el-input",{attrs:{placeholder:"联系方式"},model:{value:t.contact,callback:function(a){e.$set(t,"contact",a)},expression:"linkMan.contact"}})],1)],1),e._v(" "),a("el-col",{staticClass:"pr10",attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"0"}},[a("el-select",{staticClass:"wp100",attrs:{placeholder:"请选择角色"},model:{value:t.role_type,callback:function(a){e.$set(t,"role_type",a)},expression:"linkMan.role_type"}},e._l(e.roleTypes,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{staticClass:"pr10",attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"0"}},[a("el-input",{attrs:{placeholder:"请输入职务"},model:{value:t.post,callback:function(a){e.$set(t,"post",a)},expression:"linkMan.post"}})],1)],1)],1),e._v(" "),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:e.addContactMan}},[e._v("添加干系人")])],1)])}),e._v(" "),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.project.name,callback:function(t){e.$set(e.project,"name",t)},expression:"project.name"}})],1)],2),e._v(" "),a("div",{staticClass:"tc",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.doSave}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.doCancel}},[e._v("取 消")])],1)],1)},staticRenderFns:[]}},1170:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(928),o=l(r),s=a(882),n=l(s),i=a(1066),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(i);a(929);t.default={data:function(){return{industryType:[],dateRange:"",modalShow:!1,query:c.initProjectListQuery(),editProject:c.initProject(),customerLevelText:{1:"VIP",2:"重要客户",3:"普通客户"}}},mixins:[o.default],components:{editModal:n.default},methods:{_loadList:function(){this.assignQuery(this.query);return this.tableParams.list=c.getTestListData(),this.tableParams.total=this.tableParams.list.length},onRangeChange:function(e){this.query.create_time=e[0]+" - "+e[0]},onReset:function(){},addProject:function(){this.editProject=c.initProject(),this.modalShow=!0},doEdit:function(e){var t=this;this.editProject=c.initProject(),this.$api.project.getProjectDetail(e.id).then(function(e){t.editProject=e}),this.modalShow=!0},editDirector:function(){console.log("editDirector")},exportExcel:function(){console.log("exportExcel")},toDetail:function(e){this.$router.push({name:"projectDetail",params:{projectId:e}})},doDelete:function(e){console.log("doDelete row")},handlerEditModalSave:function(){this._loadList()}},created:function(){}}},1259:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"project-list"},[a("div",{staticClass:"mb10"},[a("el-input",{staticClass:"w150",attrs:{placeholder:"项目／客户名称"},model:{value:e.query.project_name,callback:function(t){e.$set(e.query,"project_name",t)},expression:"query.project_name"}}),e._v(" "),a("el-select",{staticClass:"w150",attrs:{placeholder:"选择行业"},model:{value:e.query.industry_type_id,callback:function(t){e.$set(e.query,"industry_type_id",t)},expression:"query.industry_type_id"}},e._l(e.industryType,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-select",{staticClass:"w150",attrs:{placeholder:"选择项目进展"},model:{value:e.query.progress,callback:function(t){e.$set(e.query,"progress",t)},expression:"query.progress"}},e._l(e.industryType,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("span",[e._v("负责人")]),e._v(" "),a("el-input",{staticClass:"w150",attrs:{placeholder:"人员姓名"},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}}),e._v(" "),a("el-date-picker",{staticClass:"w240",attrs:{type:"daterange",align:"right",placeholder:"选择日期范围","range-separator":"-",clearable:!1},on:{change:e.onRangeChange},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.onReset}},[e._v("清空")])],1),e._v(" "),a("div",{staticClass:"mb10"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addProject}},[e._v("新建项目")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.editDirector}},[e._v("修改负责人")]),e._v(" "),a("el-button",{on:{click:e.exportExcel}},[e._v("导出")])],1),e._v(" "),a("el-table",{attrs:{data:e.tableParams.list,"header-align":"center",border:"","header-row-class-name":"header-center"}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"编号",prop:"project_no"}}),e._v(" "),a("el-table-column",{attrs:{label:"项目名称",prop:"project_name"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text-link",on:{click:function(a){e.toDetail(t.row.id)}}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"客户名称",prop:"customer_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"联系人",prop:"stakeholder_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"联系方式",prop:"stakeholder_contact"}}),e._v(" "),a("el-table-column",{attrs:{label:"项目进展",prop:"progress_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"create_time"}}),e._v(" "),a("el-table-column",{attrs:{label:"客户级别",prop:"customer_level"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.customerLevelText[t.row.customer_level]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"负责人",prop:"director_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.doEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.doDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),e.tableParams.totalCount?a("el-pagination",{staticClass:"mt15",attrs:{"current-page":e.tableParams.currentPage,"page-sizes":e.tableParams.pageSizeList,"page-size":e.tableParams.pageSize,layout:e.tableParams.layout,total:e.tableParams.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),a("edit-modal",{attrs:{project:e.editProject},on:{"on-save":e.handlerEditModalSave},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}})],1)},staticRenderFns:[]}},882:function(e,t,a){a(1114);var l=a(215)(a(1078),a(1134),null,null);e.exports=l.exports},913:function(e,t,a){var l=a(215)(a(1170),a(1259),null,null);e.exports=l.exports},928:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(216),o=l(r),s=a(369),n=l(s);t.default={data:function(){return{tableServer:{},tableDataList:[],tableSelectionItems:[],tableTotalCount:0,tableOption:{layout:"total, sizes, prev, pager, next, jumper",pageSizeList:[10,20,30,40]},tableParams:{page_size:10,page_num:1}}},mounted:function(){var e=this;this.initTableServer&&this.initTableServer().then(function(){e.requestData()})},computed:{selectedIds:function(){var e=this;return this.tableParams.selectedItems.map(function(t){return t[e.pk]})}},methods:{requestData:function(){var e=this;this.tableServer.loadTableData&&this.tableServer.extraParams.id&&this.tableServer.loadTableData(this.paramsHandler()).then(function(){e.initialTableData(e.tableServer.dataList())})},paramsHandler:function(){return(0,n.default)({},this.tableParams,this.tableServer.extraParams,this.tableServer.searchParams)},initialTableData:function(e){this.tableDataList=e.data_list,this.tableTotalCount=e.total_num,this.tableParams.page_size===e.page_size&&this.tableParams.page_num===e.page_num||(this.$message("当前页数不匹配"),console.log(e),this.tableParams.page_size=e.page_size,this.tableParams.page_num=e.page_num)},handleSizeChange:function(e){e&&e!==this.tableParams.page_size&&(this.tableParams.page_size=e,this.requestData())},handleCurrentChange:function(e){e&&this.tableParams.page_num!==e&&(this.tableParams.page_num=e,this.requestData())},onSelectionChange:function(e){this.tableSelectionItems=[].concat((0,o.default)(e))},assignQuery:function(e){return(0,n.default)({page_num:this.tableParams.pageNum,page_size:this.tableParams.pageSize},e)},onSearch:function(){this.tableParams.pageNum=1,this._loadList()}}}},929:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.planType=[{value:1,label:"日计划"},{value:2,label:"周计划"},{value:3,label:"月计划"}],t.planState=[{value:1,label:"草稿"},{value:2,label:"已发布"},{value:3,label:"删除"}],t.supportType=[{value:1,label:"资金"},{value:2,label:"技术支持"},{value:3,label:"协访"},{value:4,label:"其他"}],t.customerLevel=[{value:"",label:"全部客户级别"},{value:1,label:"VIP"},{value:2,label:"重要客户"},{value:3,label:"普通客户"}],t.capitalTypes=[{value:1,label:"自筹"},{value:2,label:"政府拨款"},{value:3,label:"其他"}],t.tenderTypes=[{value:1,label:"公开招标"},{value:2,label:"邀标"},{value:3,label:"竞争性谈判"},{value:4,label:"单一来源采购"},{value:5,label:"其他"}],t.roleTypes=[{value:1,label:"项目经办人"},{value:2,label:"经办负责人"},{value:3,label:"分管领导"},{value:4,label:"关键人"}],t.projectProgressTypes=[{value:"1",label:"初步洽谈"},{value:"2",label:"方案提交"},{value:"3",label:"立项"},{value:"4",label:"招标"},{value:"5",label:"运行调试"},{value:"6",label:"汇款"}],t.serviceStates=[{value:1,label:"运行中"},{value:2,label:"待审核"},{value:3,label:"审核拒绝"}]}});
//# sourceMappingURL=13.0cc8aac6fe2977d31d20.js.map